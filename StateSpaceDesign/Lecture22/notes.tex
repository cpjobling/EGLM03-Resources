%% State Space Modelling of Dynamic Systems
%% Lecture 22: Combined Observer and Control
\def\FileDate{10/04/02}
\def\FileVersion{1.0}
% ----------------------------------------------------------------
% Notes pages *********************************************************
% ----------------------------------------------------------------

\input{frag1}
\ifslidesonly
\begin{slide}
	\heading{Combined Observer and Control}
   \input{frag1}
\end{slide}
\fi

\ifslidesonly
\begin{slide}
	\heading{Contents of this Lecture}
   \begin{itemize}
   	\item Dynamics of the combined controller-observer system
\begin{itemize}
	\item Separation principle
	\item Equivalent classical controller
\end{itemize}
\item Introducing the reference input
\begin{enumerate}
	\item The normal position
	\item Observer driven by the tracking error
\end{enumerate}
   \end{itemize}
\end{slide}
\fi

\section*{Dynamics of the combined system} % (fold)
\label{sub:dynamics_of_the_combined_system}

\input{frag4}
\ifslidesonly
\begin{slide}
	\heading{Dynamics of the combined system (1)}
   \input{frag4}
\end{slide}
\fi

\input{frag5}
\ifslidesonly
\begin{slide}
	\heading{Dynamics of the combined system (2)}
   \input{frag5}
\end{slide}
\fi 




\input{frag6}
\ifslidesonly
\begin{slide}
	\heading{Characteristic Equation (1)}
   \input{frag6}
\end{slide}
\fi

\input{frag7}
\ifslidesonly
\begin{slide}
	\heading{Characteristic Equation (2)}
   \input{frag7}
\end{slide}
\fi


% section dynamics_of_the_combined_system (end)




\subsection*{Separation Principle} % (fold)
\label{sub:separation_principle}

From the above work, we can conclude that the set of poles of the combined observer-controller system is the union of the set of closed loop controller poles and the set of observer poles.

The controller matrix  $\mathbf{K}$  is designed as before, as if the real plant states are going to be used for the feedback. This fixes the positions of the controller poles into the desired positions.

Then, quite independently, the matrix $\mathbf{L}$ is designed as before to fix the observer poles as required.

Using the observer states for the control feedback instead of the plant states does not affect the closed loop poles.

This is a fortunate situation and is known as the \textbf{separation principle}. The problems of controller design and observer design have been separated.

\ifslidesonly
\begin{slide}
	\heading{Separation Principle}
	\begin{itemize}
		\item Poles of the combined observer-controller system is the union of closed loop controller and observer poles.
		\item The controller matrix  $\mathbf{K}$  is designed as before.
		\item Quite independently, the matrix $\mathbf{L}$ is designed to fix the observer poles as required.
		\item Using the observer states for the control feedback instead of the plant states does not affect the closed loop poles.
	\end{itemize}
   This is a fortunate situation and is known as the \textbf{separation principle}. The problems of controller design and observer design have been separated.
\end{slide}
\fi
 
% section separation_principle (end)


\subsection*{The Equivalent Classical Compensator} % (fold)
\label{sec:the_equivalent_classical_compensator}


\input{frag3}
\ifslidesonly
\begin{slide}
	\heading{The Equivalent Classical Compensator}
	\input{frag3}
\end{slide}
\fi


Setting the reference input $r = 0$  gives:
\input{frag8}
\ifslidesonly
\begin{slide}
	\heading{When $r=0$}
   \input{frag8}
\end{slide}
\fi

Taking Laplace transforms, ignoring ICs:
\input{frag9}
\ifslidesonly
\begin{slide}
	\heading{Taking Laplace Transforms}
   \input{frag9}
\end{slide}
\fi


Alternatively, since
\input{frag10}
\ifslidesonly
\begin{slide}
	\heading{Alternative Formulation (1)}
   \input{frag10}
\end{slide}
\fi
\input{frag11}
\ifslidesonly
\begin{slide}
	\heading{Alternative Formulation (2)}
   \input{frag11}
\end{slide}
\fi

% section the_equivalent_classical_compensator (end)



 
\section*{Introducing the Reference Input} % (fold)
\label{sec:introducing_the_reference_input}

\ifslidesonly
\begin{slide}
   \heading{Introducing the Reference Input}
Two cases considered:
\begin{enumerate}
	\item The Normal Position
	\begin{itemize}
		\item The reference input is introduced as $u=r-\mathbf{K}\hat{\mathbf{x}}$.
	\end{itemize}
	\item Observer driven by the tracking error
	\begin{itemize}
		\item Sense the tracking error and use this to control the system.
		\item The tracking error is the difference between the desired and actual outputs $\tilde e =  - r + y$
	\end{itemize}
	Systems in each case have different properties.
\end{enumerate}
   
\end{slide}
\fi
\subsection*{1. The Normal Position} % (fold)
\label{sub:1_the_normal_position}

\input{frag2}
\ifslidesonly
\begin{slide}
	\heading{1. The Normal Position}
   \input{frag2}
\end{slide}
\fi



\subsubsection*{Finding $F(s)$ and $H(s)$} % (fold)
\label{ssub:finding_f_s_and_h_s_}

For the observer we have:
\input{frag12}
\ifslidesonly
\begin{slide}
	\heading{Finding$F(s)$ and $H(s)$: Observer}
   \input{frag12}
\end{slide}
\fi

For the controller we have:
\input{frag13}
\ifslidesonly
\begin{slide}
	\heading{Finding$F(s)$ and $H(s)$: Controller}
   \input{frag13}
\end{slide}
\fi

Therefore, for the combined observer-controller
\input{frag14}
\ifslidesonly
\begin{slide}
	\heading{Finding$F(s)$ and $H(s)$: Combined Observer-Controller}
   \input{frag14}
\end{slide}
\fi


Comparing with: $$U=F(s)R-H(s)Y$$
\[
F(s) = \frac{1}{\mathbf{KM}^{-1}\mathbf{B}+1}
\]
and
\[
H(s) = \frac{\mathbf{KM}^{-1}\mathbf{L}}{\mathbf{KM}^{-1}\mathbf{B}+1}
\]

% subsubsection finding_f_s_and_h_s_ (end)

 

\subsubsection*{A useful theorem} % (fold)
\label{ssub:a_useful_theorem}

\input{frag15}
\ifslidesonly
\begin{slide}
	\heading{A Useful Theorem}
   \input{frag15}
\end{slide}
\fi

 
% subsubsection a_useful_theorem (end)
\subsubsection*{Zeros and Poles of $F(s)$ and $H(s)$} % (fold)
\label{ssub:zeros_and_poles_of_f_s_and_h_s_}

\input{frag16}
\ifslidesonly
\begin{slide}
	\heading{Zeros and Poles of $F(s)$ (1)}
   \input{frag16}
\end{slide}
\fi

\input{frag17}
\ifslidesonly
\begin{slide}
	\heading{Zeros and Poles of $F(s)$ (2)}
   \input{frag17}
\end{slide}
\fi

Similarly for $H(s)$:
\input{frag18}
\ifslidesonly
\begin{slide}
	\heading{Zeros and Poles of $H(s)$}
   \input{frag18}
\end{slide}
\fi


% subsubsection zeros_and_poles_of_f_s_and_h_s_ (end)


\subsubsection*{The Overall Closed Loop TF} % (fold)
\label{ssub:the_overall_closed_loop_tf}

\input{frag19}
\ifslidesonly
\begin{slide}
	\heading{The Overall Closed Loop TF (1)}
   \input{frag19}
\end{slide}
\fi

\input{frag20}
\ifslidesonly
\begin{slide}
	\heading{The Overall Closed Loop TF (2)}
   \input{frag20}
\end{slide}
\fi

\input{frag21}
\ifslidesonly
\begin{slide}
	\heading{The Overall Closed Loop TF: Comments}
   \input{frag21}
\end{slide}
\fi



% subsubsection the_overall_closed_loop_tf (end)

% subsection 1_the_normal_position (end)


 
\subsection*{2. Observer Driven by the Tracking Error
} % (fold)
\label{sub:2_observer_driven_by_the_tracking_error_}

Sometimes it is desired to sense the tracking error and use this to control the system.

The tracking error is the difference between the desired and actual outputs,
\[
\tilde e =  - r + y
\]

 
Some sensors can only measure a difference between two measurands. eg  a thermocouple can only sense the temperature difference between its hot and cold junctions.
\begin{center}
	\resizebox{!}{2in}{\includegraphics{pictures/fig3.pdf}}
\end{center}
\ifslidesonly
\begin{slide}
   \heading{2. Observer Driven by the Tracking Error}
The tracking error is the difference between the desired and actual outputs,
\[
\tilde e =  - r + y
\]
   \begin{center}
	\resizebox{200pt}{!}{\includegraphics{pictures/fig3.pdf}}
   \end{center}
\end{slide}
\fi
Redraw:
\begin{center}
	\resizebox{250pt}{!}{\includegraphics{pictures/fig4.pdf}}
\end{center}
\ifslidesonly
\begin{slide}
   \heading{Redraw Block Diagram}
   \begin{center}
	\resizebox{250pt}{!}{\includegraphics{pictures/fig4.pdf}}
\end{center}
\end{slide}
\fi

\input{frag23}
\ifslidesonly
\begin{slide}
	\heading{Observer Driven by the Tracking Error (1)}
   \input{frag23}
\end{slide}
\fi

\input{frag24}
\ifslidesonly
\begin{slide}
	\heading{Observer Driven by the Tracking Error (2)}
   \input{frag24}
\end{slide}
\fi

\input{frag25}
\ifslidesonly
\begin{slide}
	\heading{Observer Driven by the Tracking Error: $H(s)$}
   \input{frag25}
\end{slide}
\fi

The overall TF is:
\input{frag26}
\ifslidesonly
\begin{slide}
	\heading{Observer Driven by the Tracking Error: Overall TF}
   \input{frag26}
\end{slide}
\fi

\input{frag27}
\ifslidesonly
\begin{slide}
	\heading{Observer Driven by the Tracking Error: Comments}
   \input{frag27}
\end{slide}
\fi


% subsection 2_observer_driven_by_the_tracking_error_ (end)

\ifslidesonly
\begin{slide}
	\heading{Summary of this Lecture}
   \begin{itemize}
   	\item Dynamics of the combined controller-observer system
\begin{itemize}
	\item Separation principle
	\item Equivalent classical controller
\end{itemize}
\item Introducing the reference input
\begin{enumerate}
	\item The normal position
	\item Observer driven by the tracking error
\end{enumerate}
   \end{itemize}
\end{slide}
\fi


% section introducing_the_reference_input (end)




%----------------------------------------------------------------
% The end of notes
% ----------------------------------------------------------------
\endinput

%%% Local Variables: 
%%% mode: latex
%%% TeX-master: t
%%% End: 
